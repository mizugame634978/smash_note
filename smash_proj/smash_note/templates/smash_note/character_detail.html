{% extends './base.html' %}
{% block content %}



  <h1>
    VS<span class="ml-10"><img  src="{{ character.image_url.url }}" alt="{{ character.character_name }}の画像"></span>
  </h1>
  <a href="{% url 'smash_note:memo_create' character.pk %}" class="btn btn-success">対戦を記録&nbsp;<i class="fa-solid fa-pen-to-square"></i></a>
  <p>勝利数: {{ wins }}</p>
  <p>勝率: {{ win_rate }}%</p>



  <div class="container">
    <form method="GET" action="{% url 'smash_note:character_detail' character.id %}">
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <select class="form-control" name="filter">

              {% if filter_character %}{#フィルターしていたら、そのキャラをAllの上に表示#}
                <option value="{{filter_character.id}}">{{filter_character.character_name}}</option>
                <option value="">All</option>
              {% else %}
                <option value="">All</option>
              {% endif %}

              {% if favorite_characters %}{#ユーザーのfavorite_charactersがいる場合#}
                {% for character in favorite_characters %}
                  <option value="{{ character.id }}" {% if selected_character == character %}selected{% endif %}>
                    ★{{ character }}
                  </option>
                {% endfor %}
                <option disabled>──────────</option>
              {% endif %}

              {% for character in characters %}
                <option value="{{ character.id }}">{{ character.character_name }}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        <div class="col-md-6">
          <button type="submit" class="btn btn-primary"><i class="fa-solid fa-filter"></i></button>
        </div>
      </div>
    </form>
  </div>


<br>
{% comment %}
{#キャラの隣のボタンを押してフィルター#}
<div class="container">
  <form method="GET" action="{% url 'smash_note:character_detail' character.id %}">

    <div class="form-group">
      {% for favorite_character in favorite_characters %}{#お気に入りキャラ#}
        <span class="bg-secondary" >
          <input type="submit" name="filter" value="{{ favorite_character.id }}">
            <img src="{{ favorite_character.image_url.url }}" alt="{{ favorite_character.character_name }}の画像">
          </input>
        </span>
        &nbsp;
      {% endfor %}
      </div>

  </form>
</div> {% endcomment %}

{###ラジオボタンでフィルター###}
  <div class="container">
    <form method="GET" action="{% url 'smash_note:character_detail' character.id %}">

      <div class="form-group">
        {% for favorite_character in favorite_characters %}{#お気に入りキャラ#}
          <span class="bg-secondary" >
            <input type="radio" name="filter" value="{{ favorite_character.id }}">
              <img src="{{ favorite_character.image_url.url }}" alt="{{ favorite_character.character_name }}の画像">
            </input>
          </span>
          &nbsp;
        {% endfor %}

        <div>---</div>

        {% for character in characters %}{#全てのキャラ#}
          <span class="bg-secondary">
            <input type="radio" name="filter" value="{{ character.id }}">
              <img src="{{ character.image_url.url }}" alt="{{ character.character_name }}の画像">
            </input>
          </span>
          &nbsp;
          {# inputの型：submit,button #}
        {% endfor %}
      </div>
        <div class="col-md-6">
          <button type="submit" class="btn btn-primary"><i class="fa-solid fa-filter"></i></button>
        </div>
    </form>
  </div>


{% comment %}  {% endcomment %}
  {% for result in match_results %}{#すべてのresultを表示#}
      <article class = "media">
        <div class = "media-content">
          <div class ="content">
            <p>

              <strong>
                  <small>{{result.memo_date}}</small>
                  {% if result.win_flag == True%}
                    <small>勝ち</small>
                  {% elif result.win_flag == False%}
                    <small>負け</small>
                  {% else %}
                    <small>無記入</small>
                  {% endif %}

                  <a href="{% url "smash_note:memo_update" result.pk %}">編集</a>
                  <small>{{result.player_character_id}}</small>
              </strong>
              <br />
              {{ result.memo }}

            </p>
          </div>
        </div>
      </article>
  {% endfor %}






{%endblock%}

